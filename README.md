# Bastet

**Bastet** — это Telegram-бот, написанный на языке Go, который объединяет в себе возможности искусственного интеллекта и развлекательные функции. Бот позволяет пользователям взаимодействовать с мощными моделями OpenAI, генерировать изображения, получать случайные цитаты и отслеживать забавную статистику.

## Особенности

- **Интеграция с OpenAI**: Использует модели `gpt-4o` и `gpt-4o-mini` для генерации текста и `dall-e-3` для создания изображений.
- **Генерация текста**: Отвечает на вопросы, пишет рассказы, генерирует идеи и многое другое по команде `/gpt`.
- **Генерация изображений**: Создает изображения по описанию, предоставленному пользователем, с помощью команды `/imagine`.
- **Случайные цитаты**: Отправляет случайную цитату из файла по команде `/q`.
- **Счетчик "дней без соседей"**: Следит за временем с момента последнего упоминания слова "сосед" в чате, сохраняя прогресс даже после перезапуска бота.
- **Команды помощи**: Команды `/start` и `/help` предоставляют информацию о возможностях бота.
- **Управление сообщениями**: Команда `/me` удаляет вызвавшее её сообщение.
- **Надежность**: Обработка ошибок, таймауты для запросов к API, логирование.

## Установка и запуск

1.  **Требования**:
    - Установленный [Go](https://golang.org/dl/) (версия 1.20 или выше).
    - Аккаунт [Telegram](https://telegram.org/) и [токен бота](https://core.telegram.org/bots#how-do-i-create-a-bot) от [@BotFather](https://t.me/BotFather).
    - Аккаунт [OpenAI](https://platform.openai.com/signup) и [API ключ](https://platform.openai.com/api-keys).

2.  **Настройка конфигурации**:
    - Убедитесь, что у вас есть пакет `config` (или файл `config.go`) в корне проекта, который экспортирует переменные `Token` (токен Telegram-бота) и `GPTtoken` (API-ключ OpenAI).
      ```go
      // config/config.go (или config.go)
      package config

      const Token = "YOUR_TELEGRAM_BOT_TOKEN_HERE"
      const GPTtoken = "YOUR_OPENAI_API_KEY_HERE"
      ```

3.  **Подготовка файлов**:
    - Создайте папку `config` в корне проекта.
    - Внутри папки `config` создайте файл `phrases.txt`. Поместите в него цитаты, каждая на новой строке. Этот файл будет использоваться командой `/q`.

4.  **Клонирование репозитория**:
    ```bash
    git clone https://github.com/ВАШ_АККАУНТ/BastetTetlegram.git
    cd BastetTetlegram
    ```

5.  **Установка зависимостей**:
    ```bash
    go mod tidy
    ```

6.  **Запуск бота**:
    ```bash
    go run main.go
    ```

    Бот начнет работу и будет слушать обновления от Telegram. Убедитесь, что ваш сервер/машина, на которой запущен бот, имеет доступ в интернет.

## Использование

После запуска и добавления бота в Telegram-чат, вы можете использовать следующие команды:

- `/start`: Отправляет приветственное сообщение с кратким описанием возможностей.
- `/help`: Показывает список доступных команд и их описание.
- `/gpt <ваш запрос>`: Отправляет ваш запрос в модель OpenAI GPT и возвращает сгенерированный ответ. Например, `/gpt Расскажи анекдот`.
- `/imagine <описание изображения>`: Запрашивает у OpenAI создание изображения на основе вашего описания. Например, `/imagine Кот в космосе`.
- `/q`: Получает и отправляет случайную цитату из файла `config/phrases.txt`.
- `/me`: Удаляет сообщение, в котором была вызвана команда.

Также бот автоматически отслеживает упоминания слова "сосед" в чате и сообщает, сколько дней прошло с момента последнего упоминания, сохраняя этот счетчик между перезапусками.

## Структура проекта
BastetTetlegram/
├── main.go # Основной файл приложения
├── config/ # Папка с конфигурациями
│ └── phrases.txt # Файл с цитатами для команды /q
├── config.go # Файл с токенами (пример)
└── go.mod # Файл зависимостей Go
└── go.sum # Файл контрольных сумм зависимостей Go


## Зависимости

- `github.com/go-telegram-bot-api/telegram-bot-api/v5`: Для взаимодействия с Telegram Bot API.
- `github.com/sashabaranov/go-openai`: Для взаимодействия с OpenAI API.

## Важно

- Храните свои токены (`Token`, `GPTtoken`) в секрете. Не коммитьте их в репозиторий. Используйте `.env` файлы и переменные окружения в продакшене.
- Убедитесь, что вы соблюдаете [условия использования OpenAI](https://openai.com/policies/terms-of-use) и [правила использования Telegram Bot API](https://core.telegram.org/bots/api#terms-of-service).
- Файл `last_mention.json` будет автоматически создан в директории запуска бота для хранения времени последнего упоминания "сосед".
